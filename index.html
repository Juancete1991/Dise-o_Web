<script>
    function addRow() {
        alert("Adding maderfakeer")
        console.log(" Mira voo ")
        var tbody = document.getElementsByTagName("tbody")[0] //devuelve un array de objetos, ponemos 0 porq podemos tener muchos tbody en el Dom
        var row = tbody.insertRow()
        row.setAttribute("id", "row" + parseInt(tbody.rows.length - 1))
        for (var i = 0; i < document.getElementsByTagName("tr")[0].cells.length; i++) {
            var cell = row.insertCell()
            cell.setAttribute("id", "cell" + i)
            if (i !== 2) {
                if (tbody.rows.length > 1) {
                    cell.innerHTML = document.getElementById("cell" + i).innerHTML
                } else {
                    cell.innerHTML = "CELL" + (i + 1)
                }
            } else {
                var button = document.createElement("button")
                button.innerHTML = "X"
                button.addEventListener("click", function () {
                    deleteRow(row.getAttribute("id"))
                })
                cell.append(button)
            }
        }
    }

    function deleteRow(rowId) {
        document.getElementById(rowId).remove()     
    }
</script>

<!DOCTYPE html>
<html>

<head>

</head>

<body>
    <table style="border: 1px solid">
        <thead>
            <tr>
                <th>COLUMN0</th>
                <th>COLUMN1</th>
                <th>COLUMN2</th>
            </tr>
        </thead>
        <tbody>
            <tr id="row0">
                <td id="cell0">CELL1</td>  <!--lo que esta en blanco es lo que va a ver el usuario, se llama inner-->
                <td id="cell1">CELL2</td>
                <td id="cell2"><button onclick="deleteRow(this.parentElement.parentElement.getAttribute('id'))">X</button></td> <!--this se refiere al botton, el elemento padre del boton es td, desp tr, el atributo que getea es Row0, la X es el inner-->
            </tr>
        </tbody>
    </table>
    <br>
    <button onclick="addRow()">Add Row</button>
</body>

</html>